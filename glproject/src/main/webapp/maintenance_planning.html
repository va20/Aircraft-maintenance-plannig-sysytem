<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="css/base.css" rel="stylesheet">
<link href="css/bootstrap-select.min.css" rel="stylesheet">
<link href="css/pagination.css" rel="stylesheet">
<link href="css/planning.css" rel="stylesheet">
<link rel="icon" href="img/avion.ico" />
<title>Maintenance Planning</title>
</head>

<body>
    <script>
        if(localStorage.length==0){
            location.href="/login.html"
        }
    </script>
	<div class="body-wrap">
		<div class="container">
			<nav class="navbar navbar-inverse" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse"
							data-target="#bs-example-navbar-collapse-1">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="#">MCC</a>
					</div>
					<div class="collapse navbar-collapse"
						id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li><a href="plane_list.html">Planes</a></li>
							<li><a href="flight_list.html">Flights</a></li>
							<li><a href="maintenance_planning.html">Maintenance
									Planning</a></li>
							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown">Import <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><input type="file" id="upload" style="display: none" /><a
										href="" id="import">MPD</a></li>
								</ul></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="logout.html">Logout</a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</div>

	<div class="container">
		<div class="w3-half">
			<div class="w3-panel w3-border x">
				<h1>Maintenance planning</h1>
			</div>
		</div>
	</div>


	<div id="rcorners" class="container">
		<div class="mx-auto">
			<select id="selectPlanes" class="selectpicker" title="Planes"
				data-size="auto">
				<option value="default">All</option>
				<script id="listPlanes" type="text/html">
				<% _.each(item, function(item) { %>
					<option value="<%= item %>"><%= item %></option>
				<% }); %>
			</script>
			</select>
		</div>
		<div class="form-group has-feedback">
			<input class="form-control searchbar" type="text"
				placeholder="Search..."
				onkeyup="w3.filterHTML('#tableTasks', '.tasks', this.value)"><i
				class="glyphicon glyphicon-filter form-control-feedback"></i>
		</div>
	</div>

	<br>

	<div id="rcorners" class="container">
		<div class="table-responsive">
			<table class="table table-hover" id="tableTasks">
				<thead>
					<tr id="thead_row">
						<th>Plane</th>
						<th>Task number</th>
						<th>Airport</th>
						<th>MRO</th>
						<th>Deadline</th>
						<th>Type</th>
						<th class="text-center">Action</th>
					</tr>
				</thead>
				<tbody id="tasks">
					<script id="list_tasks" type="text/html">
						<% _.each(item, function(item, i) { %>
                    		<tr class="tasks" data-toggle="modal" data-target="#genericTaskInfo">
								<td class="<%= item.idPlane %>"></td>
                        		<td><%= item.taskNumber %></td>
								<td><%= item.airport %></td>
                        		<td class="<%= item.idMRO %>"><%= item.idMRO %></td>
                        		<td><%= moment(item.deadline).toISOString() %></td>
                        		<td><%= item.type %></td>
								<td class="text-center">
								<a class="btn btn-info btn-xs">
								<span class="glyphicon glyphicon-edit"></a>
								<a id="<%= item.id %>" class="btn btn-danger btn-xs">
								<span class="glyphicon glyphicon-trash"></a>
								</td>
                   		 	</tr>
						<% }); %>
					</script>
				</tbody>
			</table>
			<div class="center">
				<div class="paging-container pagination" id="tablePaging"></div>
				<button id="add" class="btn btn-success" type="button">
					<span class="glyphicon glyphicon-plus"></span>
				</button>
			</div>
		</div>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="genericTaskInfo" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;
					</button>
					<h4 class="modal-title">More info</h4>
				</div>
				<div id="genericTaskListInfo" class="modal-body">
					<ul class="list-group">
						<script id="genericTaskModal" type="text/html">
							<% _.each(item, function(item) { %>
								<li class="list-group-item"><%= item %><span class="badge">item</span></li>
							<% }); %>
						</script>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<script src="scripts/jquery-3.1.1.min.js"></script>
	<script src="scripts/bootstrap.min.js"></script>
	<script src="scripts/bootstrap-select.min.js"></script>
	<script src="scripts/underscore-min.js"></script>
	<script src="scripts/jquery.modal.min.js"></script>
	<script src="scripts/w3.js"></script>
	<script src="scripts/pagination.js"></script>
	<script src="scripts/moment.js"></script>
	<script src="scripts/ddtf.js"></script>
	<script src="scripts/menu.js"></script>
	<script src="scripts/planning.js"></script>
</body>
</html>
