<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>MCC</title>
		<!-- Custom Stylesheet -->
		<link rel="stylesheet" href="css/login.css">
	</head>

	<body>
		<div class="container">
			<div class="top">
				<h1 id="title" class="hidden"><span id="logo"><span>MCC</span></span></h1>
			</div>
			<div class="login-box animated fadeInUp">
				<div class="box-header">
					<h2>Login</h2>
				</div>
				<label for="username">Username</label>
				<br/>
				<input type="text" id="username">
				<br/>
				<label for="password">Password</label>
				<br/>
				<input type="password" id="password">
				<br/>
				<button id="connexion" type="submit" disabled="true">Connection</button>
				<br/>
			</div>
		</div>

		<!--On verifie que les champs sont remplis-->
		<script>
			$('#username,#password').on('input',function() {
				if($('#username').val()!="" && $('#password').val()!="") $('#connexion').prop('disabled',false);
				else $('#connexion').prop('disabled',true);
			});

			$('#connexion').click(function() {
				var login = $('#username').val();
				var pass = $('#password').val();
				$.ajax({
					url : 'ws/login/'+login+'/'+pass,
					type : 'POST',
					dataType : 'json',
					success : function(data) {
						if(!data){
							$("#span_con").html("identifiant incorrect");
						}else{
							startSession(login);
							location.href="/list.html";
						}
					},error : function(resultat, statut, erreur) {
						alert("Can't contact servor ");
					}
				});
			});
		</script>
	</body>
</html>
